# Phase 9: ESPN API Integration - Plan 01

## Objective

Integrate ESPN's public API to display live scores, schedules, standings, and game data for Clemson sports on the website. Create reusable components and a robust service layer with caching and error handling.

## Research Summary

### ESPN API Key Findings

**Base URLs:**
- `site.api.espn.com` - Scores, news, teams, standings
- `sports.core.api.espn.com` - Athletes, detailed stats

**Clemson Team ID:** `228` (used across all sports)

**ACC Conference ID:** `1` (for filtering conference data)

**Endpoint Pattern:**
```
https://site.api.espn.com/apis/site/v2/sports/{sport}/{league}/{resource}
```

**Available Sports for Clemson:**
| Sport | League Path | Verified |
|-------|-------------|----------|
| Football | `football/college-football` | Yes |
| Men's Basketball | `basketball/mens-college-basketball` | Yes |
| Women's Basketball | `basketball/womens-college-basketball` | TBD |
| Baseball | `baseball/college-baseball` | TBD |

**Data Available:**
- Team info (name, colors, logos in multiple sizes)
- Current record (overall, home, away, conference)
- Schedule with game results
- Live scores during games
- Key player statistics
- Venue information
- Conference standings

### API Considerations
- **No authentication required** for public endpoints
- **No official rate limits** (be respectful)
- **Undocumented API** - endpoints may change
- **Cache aggressively** to reduce API calls

## Execution Context

Files to create:
- `frontend/lib/espn.ts` - ESPN API service layer
- `frontend/lib/espn-types.ts` - TypeScript interfaces
- `frontend/components/espn/ScoreCard.tsx` - Game score display
- `frontend/components/espn/ScheduleWidget.tsx` - Upcoming games
- `frontend/components/espn/StandingsWidget.tsx` - Conference standings
- `frontend/components/espn/LiveScore.tsx` - Real-time score updates

Files to modify:
- `frontend/app/page.tsx` - Add ESPN widgets to homepage
- `frontend/app/category/[slug]/page.tsx` - Sport-specific ESPN data

## Tasks

### Task 1: Create ESPN API Service Layer
**Scope:** S (1-2 files)

Create `frontend/lib/espn.ts` with:

```typescript
// ESPN API configuration
const ESPN_BASE_URL = 'https://site.api.espn.com/apis/site/v2/sports';
const CLEMSON_TEAM_ID = '228';
const ACC_CONFERENCE_ID = '1';

// Sport configurations
const SPORTS = {
  football: 'football/college-football',
  mensBasketball: 'basketball/mens-college-basketball',
  womensBasketball: 'basketball/womens-college-basketball',
  baseball: 'baseball/college-baseball',
} as const;

// API functions
export async function getTeamInfo(sport: keyof typeof SPORTS)
export async function getTeamSchedule(sport: keyof typeof SPORTS)
export async function getTeamRecord(sport: keyof typeof SPORTS)
export async function getScoreboard(sport: keyof typeof SPORTS)
export async function getStandings(sport: keyof typeof SPORTS)
```

**Caching Strategy:**
- Team info: 24 hours (rarely changes)
- Schedule: 1 hour
- Scores during games: 30 seconds
- Standings: 15 minutes

### Task 2: Create TypeScript Interfaces
**Scope:** S (1 file)

Create `frontend/lib/espn-types.ts` with interfaces for:
- `ESPNTeam` - Team details, logos, colors
- `ESPNGame` - Game info, scores, venue
- `ESPNSchedule` - List of games
- `ESPNStanding` - Conference standings
- `ESPNRecord` - Win/loss records
- `ESPNAthlete` - Player stats

### Task 3: Build ScoreCard Component
**Scope:** S (1 file)

Create `frontend/components/espn/ScoreCard.tsx`:
- Display game score with team logos
- Show game status (scheduled, in-progress, final)
- Include venue and broadcast info
- Responsive design for mobile/desktop
- Loading and error states

### Task 4: Build ScheduleWidget Component
**Scope:** S (1 file)

Create `frontend/components/espn/ScheduleWidget.tsx`:
- List upcoming 5 games
- Show date, opponent, home/away, time
- Link to ESPN game page
- Sport-specific styling

### Task 5: Build StandingsWidget Component
**Scope:** S (1 file)

Create `frontend/components/espn/StandingsWidget.tsx`:
- Display ACC conference standings
- Highlight Clemson's position
- Show W-L record and conference record
- Compact table design

### Task 6: Build LiveScore Component
**Scope:** M (1-2 files)

Create `frontend/components/espn/LiveScore.tsx`:
- Real-time score updates using polling
- Game clock/quarter/period display
- Key play highlights
- Auto-refresh every 30 seconds during games

### Task 7: Integrate ESPN Data on Homepage
**Scope:** M (2-3 files)

Modify `frontend/app/page.tsx`:
- Add "Live Scores" section when games active
- Add "Upcoming Games" widget in sidebar
- Add "Clemson in the Rankings" if ranked

### Task 8: Sport Category Page Integration
**Scope:** M (2-3 files)

Modify `frontend/app/category/[slug]/page.tsx`:
- Show sport-specific ESPN data on category pages
- Football page: Football schedule/scores
- Basketball page: Basketball schedule/scores
- Match category slug to sport type

## Verification

- [ ] ESPN API service fetches data correctly
- [ ] ScoreCard displays game information properly
- [ ] ScheduleWidget shows upcoming games
- [ ] StandingsWidget renders ACC standings
- [ ] LiveScore updates during active games
- [ ] Homepage displays ESPN widgets
- [ ] Category pages show sport-specific data
- [ ] Error handling works when API unavailable
- [ ] Caching reduces API calls appropriately
- [ ] Mobile responsive design works

## Success Criteria

- Live scores display during Clemson games
- Upcoming schedule visible on homepage and sport pages
- Conference standings show Clemson's position
- Graceful fallbacks when ESPN API is down
- No visible loading delays (proper caching)
- Consistent Clemson branding on ESPN components

## Output

Upon completion:
- ESPN API integration fully functional
- Live scores, schedules, standings components
- Homepage and category pages enhanced with ESPN data
- Robust error handling and caching

---

*Plan created: 2026-01-16*
*Phase: 09-espn-api*
